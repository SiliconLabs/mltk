
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width,initial-scale=1">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <meta name="title" content="Machine Learning Toolkit">
<meta name="description" content="A Python package with command-line utilities and scripts to aid the development of machine learning models for Silicon Lab's embedded platforms">
<meta name="keywords" content="machine learning, machine-learning, machinelearning, ml, ai, iot, Internet of things, aiot, tinyml, tensorflow, tensorflow-lite, tensorflow-lite-micro, keras-tensorflow, keras, tflite, embedded, embedded-systems, mcu, Microcontrollers, hardware, python, c++, cmake, keras, numpy, silabs, silicon labs">
<meta name="robots" content="index, follow">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="language" content="English">
<meta name="author" content="Silicon Labs">
  <meta name="lang:clipboard.copy" content="Copy to clipboard">
  <meta name="lang:clipboard.copied" content="Copied to clipboard">
  <meta name="lang:search.language" content="en">
  <meta name="lang:search.pipeline.stopwords" content="True">
  <meta name="lang:search.pipeline.trimmer" content="True">
  <meta name="lang:search.result.none" content="No matching documents">
  <meta name="lang:search.result.one" content="1 matching document">
  <meta name="lang:search.result.other" content="# matching documents">
  <meta name="lang:search.tokenizer" content="[\s\-]+">

  
    <link href="https://fonts.googleapis.com/css?family=Roboto+Mono:400,500,700|Roboto:300,400,400i,700&display=fallback" rel="stylesheet">

    <style>
      body,
      input {
        font-family: "Roboto", "Helvetica Neue", Helvetica, Arial, sans-serif
      }

      code,
      kbd,
      pre {
        font-family: "Roboto Mono", "Courier New", Courier, monospace
      }
    </style>
  

  <link rel="stylesheet" href="../../_static/stylesheets/application.css"/>
  <link rel="stylesheet" href="../../_static/stylesheets/application-palette.css"/>
  <link rel="stylesheet" href="../../_static/stylesheets/application-fixes.css"/>
  
  <link rel="stylesheet" href="../../_static/fonts/material-icons.css"/>
  
  <meta name="theme-color" content="#3f51b5">
  <script src="../../_static/javascripts/modernizr.js"></script>
  
<script async src="https://www.googletagmanager.com/gtag/js?id=G-HZ5MW943WF"></script>
<script>
    window.gTrackingId = 'G-HZ5MW943WF';
</script>
<meta name="google-site-verification" content="dsSsmnE2twOnfSAQk5zBBTrjMArsTJj809Bp-8mVlIw" />
  
  
    <title>Model Specification &#8212; MLTK 0.7.0 documentation</title>
    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/material.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/panels-main.c949a650a448cc0ae9fd3441c0e17fb0.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/panels-variables.63bdf2d2865d068e5434884f20825da9.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/css/custom.css" />
    <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/clipboard.min.js"></script>
    <script src="../../_static/copybutton.js"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../../_static/togglebutton.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="../../_static/js/custom.js"></script>
    <link rel="shortcut icon" href="../../_static/favicon.ico"/>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Model Training" href="model_training.html" />
    <link rel="prev" title="Model Visualizer" href="model_visualizer.html" />
  
   

  </head>
  <body dir=ltr
        data-md-color-primary=red data-md-color-accent=light-blue>
  
  <svg class="md-svg">
    <defs data-children-count="0">
      
      <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448" viewBox="0 0 416 448" id="__github"><path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19T128 352t-18.125-8.5-10.75-19T96 304t3.125-20.5 10.75-19T128 256t18.125 8.5 10.75 19T160 304zm160 0q0 10-3.125 20.5t-10.75 19T288 352t-18.125-8.5-10.75-19T256 304t3.125-20.5 10.75-19T288 256t18.125 8.5 10.75 19T320 304zm40 0q0-30-17.25-51T296 232q-10.25 0-48.75 5.25Q229.5 240 208 240t-39.25-2.75Q130.75 232 120 232q-29.5 0-46.75 21T56 304q0 22 8 38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0 37.25-1.75t35-7.375 30.5-15 20.25-25.75T360 304zm56-44q0 51.75-15.25 82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5T212 416q-19.5 0-35.5-.75t-36.875-3.125-38.125-7.5-34.25-12.875T37 371.5t-21.5-28.75Q0 312 0 260q0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25 30.875Q171.5 96 212 96q37 0 70 8 26.25-20.5 46.75-30.25T376 64q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34 99.5z"/></svg>
      
    </defs>
  </svg>
  
  <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer">
  <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search">
  <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
  <a href="#docs/guides/model_specification" tabindex="1" class="md-skip"> Skip to content </a>
  <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex navheader">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="../../index.html" title="MLTK 0.7.0 documentation"
           class="md-header-nav__button md-logo">
          
              <img src="../../_static/logo.png"
                   alt="MLTK 0.7.0 documentation logo">
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          <span class="md-header-nav__topic">Machine Learning Toolkit</span>
          <span class="md-header-nav__topic"> Model Specification </span>
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
        
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" action="../../search.html" method="get" name="search">
      <input type="text" class="md-search__input" name="q" placeholder="Search"
             autocapitalize="off" autocomplete="off" spellcheck="false"
             data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>

      </div>
      
        <div class="md-flex__cell md-flex__cell--shrink">
          <div class="md-header-nav__source">
            <a href="https://github.com/siliconlabs/mltk" title="Go to repository" class="md-source" data-md-source="github">

    <div class="md-source__icon">
      <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 24 24" width="28" height="28">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    MLTK Github Repository
  </div>
</a>
          </div>
        </div>
      
      
    </div>
  </nav>
</header>

  
  <div class="md-container">
    

<div class="md-hero" data-md-component="hero">
  <div class="md-hero__inner md-grid">
    <p>Define a model specification using a standard Python script</p>
  </div>
</div>

    
    
  <nav class="md-tabs" data-md-component="tabs">
    <div class="md-tabs__inner md-grid">
      <ul class="md-tabs__list">
            
            <li class="md-tabs__item"><a href="https://docs.silabs.com/gecko-platform/latest/machine-learning/tensorflow/overview" class="md-tabs__link">Gecko SDK Documentation</a></li>
            
            <li class="md-tabs__item"><a href="https://github.com/tensorflow/tflite-micro" class="md-tabs__link">Tensorflow-Lite Micro Repository</a></li>
            
            <li class="md-tabs__item"><a href="https://www.tensorflow.org/learn" class="md-tabs__link">Tensorflow Documentation</a></li>
          <li class="md-tabs__item"><a href="index.html" class="md-tabs__link">Modeling Guides</a></li>
      </ul>
    </div>
  </nav>
    <main class="md-main">
      <div class="md-main__inner md-grid" data-md-component="container">
        
          <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
            <div class="md-sidebar__scrollwrap">
              <div class="md-sidebar__inner">
                <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href="../../index.html" title="MLTK 0.7.0 documentation" class="md-nav__button md-logo">
      
        <img src="../../_static/logo.png" alt=" logo" width="48" height="48">
      
    </a>
    <a href="../../index.html"
       title="MLTK 0.7.0 documentation">Machine Learning Toolkit</a>
  </label>
    <div class="md-nav__source">
      <a href="https://github.com/siliconlabs/mltk" title="Go to repository" class="md-source" data-md-source="github">

    <div class="md-source__icon">
      <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 24 24" width="28" height="28">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    MLTK Github Repository
  </div>
</a>
    </div>
  
  

  
  <ul class="md-nav__list">
    <li class="md-nav__item">
    
      <span class="md-nav__link caption"><span class="caption-text">Basics</span></span>
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../overview.html" class="md-nav__link">Overview</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../why_mltk.html" class="md-nav__link">Why MLTK?</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../installation.html" class="md-nav__link">Installation</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../command_line.html" class="md-nav__link">Command-Line</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="index.html" class="md-nav__link">Modeling Guides</a>
      <ul class="md-nav__list"> 
    <li class="md-nav__item">
    
    
      <a href="model_profiler.html" class="md-nav__link">Model Profiler</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="model_profiler_utility.html" class="md-nav__link">Model Profiler Utility</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="model_visualizer.html" class="md-nav__link">Model Visualizer</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    <label class="md-nav__link md-nav__link--active" for="__toc"> Model Specification </label>
    
      <a href="#" class="md-nav__link md-nav__link--active">Model Specification</a>
      
        
<nav class="md-nav md-nav--secondary">
    <label class="md-nav__title" for="__toc">Contents</label>
  <ul class="md-nav__list" data-md-scrollfix="">
        <li class="md-nav__item"><a href="#docs-guides-model-specification--page-root" class="md-nav__link">Model Specification</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#overview" class="md-nav__link">Overview</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#model-name" class="md-nav__link">Model Name</a>
        </li>
        <li class="md-nav__item"><a href="#discoverable-models" class="md-nav__link">Discoverable Models</a>
        </li></ul>
            </nav>
        </li>
        <li class="md-nav__item"><a href="#mltkmodel-class-instance" class="md-nav__link">MltkModel Class Instance</a>
        </li>
        <li class="md-nav__item"><a href="#specification-sections" class="md-nav__link">Specification Sections</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#model-layout" class="md-nav__link">Model Layout</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#note-about-hardcoding-model-layer-parameters" class="md-nav__link">Note about hardcoding model layer parameters</a>
        </li></ul>
            </nav>
        </li>
        <li class="md-nav__item"><a href="#general-settings" class="md-nav__link">General Settings</a>
        </li>
        <li class="md-nav__item"><a href="#basic-training-settings" class="md-nav__link">Basic Training Settings</a>
        </li>
        <li class="md-nav__item"><a href="#training-keras-callback-settings" class="md-nav__link">Training Keras Callback Settings</a>
        </li>
        <li class="md-nav__item"><a href="#tensorflow-lite-converter-settings" class="md-nav__link">Tensorflow-Lite Converter Settings</a>
        </li>
        <li class="md-nav__item"><a href="#basic-dataset-settings" class="md-nav__link">Basic Dataset Settings</a>
        </li>
        <li class="md-nav__item"><a href="#dataset-augmentation-settings" class="md-nav__link">Dataset Augmentation Settings</a>
        </li>
        <li class="md-nav__item"><a href="#evaluation-settings" class="md-nav__link">Evaluation Settings</a>
        </li>
        <li class="md-nav__item"><a href="#additional-parameters" class="md-nav__link">Additional Parameters</a>
        </li></ul>
            </nav>
        </li>
        <li class="md-nav__item"><a href="#examples" class="md-nav__link">Examples</a>
        </li></ul>
            </nav>
        </li>
    
<li class="md-nav__item"><a class="md-nav__extra_link" href="../../_sources/docs/guides/model_specification.md.txt">Show Source</a> </li>

  </ul>
</nav>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="model_training.html" class="md-nav__link">Model Training</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="model_evaluation.html" class="md-nav__link">Model Evaluation</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="model_quantization.html" class="md-nav__link">Model Quantization</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="model_parameters.html" class="md-nav__link">Model Parameters</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="model_summary.html" class="md-nav__link">Model Summary</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="model_archive.html" class="md-nav__link">Model Archive File</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="model_search_path.html" class="md-nav__link">Model Search Path</a>
      
    
    </li></ul>
    
    </li>
    <li class="md-nav__item">
    
      <span class="md-nav__link caption"><span class="caption-text">Usage</span></span>
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../tutorials.html" class="md-nav__link">Tutorials</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../examples.html" class="md-nav__link">API Examples</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../python_api/index.html" class="md-nav__link">API Reference</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../python_api/models/index.html" class="md-nav__link">Reference Models</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../python_api/datasets/index.html" class="md-nav__link">Reference Datasets</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../cpp_development/index.html" class="md-nav__link">C++ Development</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../cpp_development/examples/index.html" class="md-nav__link">C++ Examples</a>
      
    
    </li>
    <li class="md-nav__item">
    
      <span class="md-nav__link caption"><span class="caption-text">Audio Related</span></span>
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../audio/keyword_spotting_overview.html" class="md-nav__link">Keyword Spotting Overview</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../audio/audio_feature_generator.html" class="md-nav__link">Audio Feature Generator</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../audio/audio_utilities.html" class="md-nav__link">Audio Utilities</a>
      
    
    </li>
    <li class="md-nav__item">
    
      <span class="md-nav__link caption"><span class="caption-text">Other Information</span></span>
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../faq/index.html" class="md-nav__link">Frequently Asked Questions</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../other/quick_reference.html" class="md-nav__link">Quick Reference</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="notebook_examples_guide.html" class="md-nav__link">Notebook Examples Guide</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../other/settings_file.html" class="md-nav__link">Settings File</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../other/environment_variables.html" class="md-nav__link">Environment Variables</a>
      
    
    </li>
  </ul>
  

</nav>
              </div>
            </div>
          </div>
          <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
            <div class="md-sidebar__scrollwrap">
              <div class="md-sidebar__inner">
                
<nav class="md-nav md-nav--secondary">
    <label class="md-nav__title" for="__toc">Contents</label>
  <ul class="md-nav__list" data-md-scrollfix="">
        <li class="md-nav__item"><a href="#docs-guides-model-specification--page-root" class="md-nav__link">Model Specification</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#overview" class="md-nav__link">Overview</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#model-name" class="md-nav__link">Model Name</a>
        </li>
        <li class="md-nav__item"><a href="#discoverable-models" class="md-nav__link">Discoverable Models</a>
        </li></ul>
            </nav>
        </li>
        <li class="md-nav__item"><a href="#mltkmodel-class-instance" class="md-nav__link">MltkModel Class Instance</a>
        </li>
        <li class="md-nav__item"><a href="#specification-sections" class="md-nav__link">Specification Sections</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#model-layout" class="md-nav__link">Model Layout</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#note-about-hardcoding-model-layer-parameters" class="md-nav__link">Note about hardcoding model layer parameters</a>
        </li></ul>
            </nav>
        </li>
        <li class="md-nav__item"><a href="#general-settings" class="md-nav__link">General Settings</a>
        </li>
        <li class="md-nav__item"><a href="#basic-training-settings" class="md-nav__link">Basic Training Settings</a>
        </li>
        <li class="md-nav__item"><a href="#training-keras-callback-settings" class="md-nav__link">Training Keras Callback Settings</a>
        </li>
        <li class="md-nav__item"><a href="#tensorflow-lite-converter-settings" class="md-nav__link">Tensorflow-Lite Converter Settings</a>
        </li>
        <li class="md-nav__item"><a href="#basic-dataset-settings" class="md-nav__link">Basic Dataset Settings</a>
        </li>
        <li class="md-nav__item"><a href="#dataset-augmentation-settings" class="md-nav__link">Dataset Augmentation Settings</a>
        </li>
        <li class="md-nav__item"><a href="#evaluation-settings" class="md-nav__link">Evaluation Settings</a>
        </li>
        <li class="md-nav__item"><a href="#additional-parameters" class="md-nav__link">Additional Parameters</a>
        </li></ul>
            </nav>
        </li>
        <li class="md-nav__item"><a href="#examples" class="md-nav__link">Examples</a>
        </li></ul>
            </nav>
        </li>
    
<li class="md-nav__item"><a class="md-nav__extra_link" href="../../_sources/docs/guides/model_specification.md.txt">Show Source</a> </li>

<li id="searchbox" class="md-nav__item"></li>

  </ul>
</nav>
              </div>
            </div>
          </div>
        
        <div class="md-content">

          
          <div class="breadcrumbs md-typeset">
            <ul class="breadcrumb">
              <li></li>
              <li><a href="../../index.html"><i class="md-icon">home</i></a></li>
                <li class="active"><a href="index.html" accesskey="U">Modeling Guides</a></li>
            </ul>
          </div>
          

          <article class="md-content__inner md-typeset" role="main">
            
  <section id="model-specification">
<h1 id="docs-guides-model-specification--page-root">Model Specification<a class="headerlink" href="#docs-guides-model-specification--page-root" title="Permalink to this headline">¶</a></h1>
<section id="overview">
<h2 id="overview">Overview<a class="headerlink" href="#overview" title="Permalink to this headline">¶</a></h2>
<p>The model specification is a standard Python script that defines everything needed to create, train, and evaluate a machine learning model.</p>
<p>This includes:</p>
<ul class="simple">
<li><p>Model version and description</p></li>
<li><p>Model architecture/layout defined using the <a class="reference external" href="https://keras.io/api">Keras API</a></p></li>
<li><p>Dataset and any augmentation settings</p></li>
<li><p>Classification labels (e.g. <code class="docutils literal notranslate"><span class="pre">yes</span></code>, <code class="docutils literal notranslate"><span class="pre">no</span></code>)</p></li>
<li><p>Training batch size, epochs, optimizer, loss metrics</p></li>
<li><p>Keras training <a class="reference external" href="https://www.tensorflow.org/api_docs/python/tf/keras/callbacks">callbacks</a></p></li>
<li><p>Tensorflow-Lite <a class="reference external" href="https://www.tensorflow.org/lite/convert">Converter</a> settings for <a class="reference internal" href="model_quantization.html"><span class="doc std std-doc">quantizing</span></a> the model</p></li>
<li><p>Additional <a class="reference internal" href="model_parameters.html"><span class="doc std std-doc">parameters</span></a> to include in the <code class="docutils literal notranslate"><span class="pre">.tflite</span></code> model file’s metadata</p></li>
</ul>
<section id="model-name">
<h3 id="model-name">Model Name<a class="headerlink" href="#model-name" title="Permalink to this headline">¶</a></h3>
<p>The filename of the model specification script is the name given to the model.</p>
<p>So a model specification script with the file path:  <code class="docutils literal notranslate"><span class="pre">~/workspace/my_model_v1.py</span></code>
would have a model name: <code class="docutils literal notranslate"><span class="pre">my_model_v1</span></code></p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The model specification script’s name must only contain alphanumeric or underscore characters</p>
</div>
</section>
<section id="discoverable-models">
<h3 id="discoverable-models">Discoverable Models<a class="headerlink" href="#discoverable-models" title="Permalink to this headline">¶</a></h3>
<p>The <a class="reference internal" href="../python_api/core/utilities.html#mltk.core.list_mltk_models" title="mltk.core.list_mltk_models"><span class="xref myst py py-func">list_mltk_models</span></a> API returns all <a class="reference internal" href="../python_api/core/mltk_model.html#mltk.core.MltkModel" title="mltk.core.MltkModel"><span class="xref myst py py-class">MltkModel</span></a> models found on the
<a class="reference internal" href="model_search_path.html"><span class="doc std std-doc">Model Search Path</span></a>. To make this API efficient, it only parses the text of the Python
scripts found on the model search path for the delimiter <code class="docutils literal notranslate"><span class="pre">@mltk_model</span></code> (as opposed to loading each model as a Python module).</p>
<p>Thus, to make your model discoverable by this API, add <code class="docutils literal notranslate"><span class="pre">@mltk_model</span></code> to your model specification script.</p>
</section>
</section>
<section id="mltkmodel-class-instance">
<h2 id="mltkmodel-class-instance">MltkModel Class Instance<a class="headerlink" href="#mltkmodel-class-instance" title="Permalink to this headline">¶</a></h2>
<p>The core of the model specification script is the <a class="reference internal" href="../python_api/core/mltk_model.html#mltk.core.MltkModel" title="mltk.core.MltkModel"><span class="xref myst py py-class">MltkModel</span></a> class instance.<br/>
This is a Python class that contains all of the model settings and properties.
Additional properties are added to the <a class="reference internal" href="../python_api/core/mltk_model.html#mltk.core.MltkModel" title="mltk.core.MltkModel"><span class="xref myst py py-class">MltkModel</span></a> by inheriting additional model “mixins”.</p>
<p>For example, the following might be added to the top of model specification script:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Define a new MyModel class which inherits the </span>
<span class="c1"># MltkModel and several mixins</span>
<span class="c1"># NOTE: The name of the custom class can by anything</span>
<span class="c1"># @mltk_model</span>
<span class="k">class</span> <span class="nc">MyModel</span><span class="p">(</span>
    <span class="n">MltkModel</span><span class="p">,</span> 
    <span class="n">TrainMixin</span><span class="p">,</span> 
    <span class="n">AudioDatasetMixin</span><span class="p">,</span> 
    <span class="n">EvaluateClassifierMixin</span>
<span class="p">):</span>
    <span class="sd">"""My Model's class object"""</span>

<span class="c1"># Instantiate the MyModel class</span>
<span class="n">my_model</span> <span class="o">=</span> <span class="n">MyModel</span><span class="p">()</span>
</pre></div>
</div>
<p>Here we define our model’s class object: <code class="docutils literal notranslate"><span class="pre">MyModel</span></code>.</p>
<p>At a minimum, this class must inherit <a class="reference internal" href="../python_api/core/mltk_model.html#mltk.core.MltkModel" title="mltk.core.MltkModel"><span class="xref myst py py-class">MltkModel</span></a>.</p>
<p>However, to use this model for training or evaluation, it should also inherit others “mixins” such as:</p>
<ul class="simple">
<li><p><a class="reference internal" href="../python_api/core/mltk_model.html#mltk.core.TrainMixin" title="mltk.core.TrainMixin"><span class="xref myst py py-class">TrainMixin</span></a> - Enables model training, see <a class="reference internal" href="model_training.html"><span class="doc std std-doc">Model Training</span></a></p></li>
<li><p><a class="reference internal" href="../python_api/core/mltk_model.html#mltk.core.EvaluateClassifierMixin" title="mltk.core.EvaluateClassifierMixin"><span class="xref myst py py-class">EvaluateClassifierMixin</span></a> - Enables model evaluation, see <a class="reference internal" href="model_evaluation.html"><span class="doc std std-doc">Model Evaluation</span></a></p></li>
<li><p><a class="reference internal" href="../python_api/core/mltk_model.html#mltk.core.ImageDatasetMixin" title="mltk.core.ImageDatasetMixin"><span class="xref myst py py-class">ImageDatasetMixin</span></a> - Enables image datasets</p></li>
<li><p><a class="reference internal" href="../python_api/core/mltk_model.html#mltk.core.AudioDatasetMixin" title="mltk.core.AudioDatasetMixin"><span class="xref myst py py-class">AudioDatasetMixin</span></a> - Enables audio datasets</p></li>
</ul>
<p>The rest of the model specification script populates the various parameters of the model instance, e.g.:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># General Settings</span>
<span class="n">my_model</span><span class="o">.</span><span class="n">version</span> <span class="o">=</span> <span class="mi">1</span>
<span class="n">my_model</span><span class="o">.</span><span class="n">description</span> <span class="o">=</span> <span class="s1">'My model is great!'</span>

<span class="c1"># Training Basic Settings</span>
<span class="n">my_model</span><span class="o">.</span><span class="n">epochs</span> <span class="o">=</span> <span class="mi">100</span>
<span class="n">my_model</span><span class="o">.</span><span class="n">batch_size</span> <span class="o">=</span> <span class="mi">64</span> 
<span class="n">my_model</span><span class="o">.</span><span class="n">optimizer</span> <span class="o">=</span> <span class="s1">'adam'</span>
<span class="o">...</span>

<span class="c1"># Dataset Settings</span>
<span class="n">my_model</span><span class="o">.</span><span class="n">dataset</span> <span class="o">=</span> <span class="n">speech_commands_v2</span>
<span class="n">my_model</span><span class="o">.</span><span class="n">class_mode</span> <span class="o">=</span> <span class="s1">'categorical'</span>
<span class="n">my_model</span><span class="o">.</span><span class="n">classes</span> <span class="o">=</span> <span class="p">[</span><span class="s1">'up'</span><span class="p">,</span> <span class="s1">'down'</span><span class="p">,</span> <span class="s1">'left'</span><span class="p">,</span> <span class="s1">'right'</span><span class="p">]</span>
<span class="o">...</span>
</pre></div>
</div>
</section>
<section id="specification-sections">
<h2 id="specification-sections">Specification Sections<a class="headerlink" href="#specification-sections" title="Permalink to this headline">¶</a></h2>
<p>After the model class instantiation, a typical model specification script contains the following sections:</p>
<section id="model-layout">
<h3 id="model-layout">Model Layout<a class="headerlink" href="#model-layout" title="Permalink to this headline">¶</a></h3>
<p>The actual machine learning model is defined using the <a class="reference external" href="https://keras.io/api">Keras API</a>.
The model is defined in a function that builds a <a class="reference internal" href="../python_api/core/keras_model.html#mltk.core.KerasModel" title="mltk.core.KerasModel"><span class="xref myst py py-func">KerasModel</span></a>.
The model specification then sets the model property <a class="reference internal" href="../python_api/core/mltk_model.html#mltk.core.TrainMixin.build_model_function" title="mltk.core.TrainMixin.build_model_function"><span class="xref myst py py-attr">TrainMixin.build_model_function</span></a>
to reference the function. At model training time, the model building function is invoked and the built
<a class="reference internal" href="../python_api/core/keras_model.html#mltk.core.KerasModel" title="mltk.core.KerasModel"><span class="xref myst py py-func">KerasModel</span></a> is trained using Tensorflow.</p>
<p>For example, a model specification script might have:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">my_model_builder</span><span class="p">(</span><span class="n">my_model</span><span class="p">:</span> <span class="n">MyModel</span><span class="p">):</span>
    <span class="n">keras_model</span> <span class="o">=</span> <span class="n">Sequential</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">my_model</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>

    <span class="n">keras_model</span> <span class="o">=</span> <span class="n">Sequential</span><span class="p">()</span>
    <span class="n">keras_model</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">InputLayer</span><span class="p">(</span><span class="n">my_model</span><span class="o">.</span><span class="n">input_shape</span><span class="p">))</span>
    <span class="n">keras_model</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">Conv2D</span><span class="p">(</span>
        <span class="n">filters</span><span class="o">=</span><span class="mi">8</span><span class="p">,</span>
        <span class="n">kernel_size</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">8</span><span class="p">),</span>
        <span class="n">use_bias</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">padding</span><span class="o">=</span><span class="s2">"same"</span><span class="p">,</span>
        <span class="n">strides</span><span class="o">=</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">))</span>
    <span class="p">)</span>
    <span class="n">keras_model</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">Activation</span><span class="p">(</span><span class="s1">'relu'</span><span class="p">))</span>
    <span class="n">keras_model</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">Flatten</span><span class="p">())</span>
    <span class="n">keras_model</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">Dense</span><span class="p">(</span><span class="n">units</span><span class="o">=</span><span class="n">my_model</span><span class="o">.</span><span class="n">n_classes</span><span class="p">))</span>

    <span class="n">keras_model</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span>
        <span class="n">loss</span><span class="o">=</span><span class="n">my_model</span><span class="o">.</span><span class="n">loss</span><span class="p">,</span> 
        <span class="n">optimizer</span><span class="o">=</span><span class="n">my_model</span><span class="o">.</span><span class="n">optimizer</span><span class="p">,</span> 
        <span class="n">metrics</span><span class="o">=</span><span class="n">my_model</span><span class="o">.</span><span class="n">metrics</span>
    <span class="p">)</span>
    <span class="k">return</span> <span class="n">keras_model</span>

<span class="c1"># Set the model property to reference the model build function</span>
<span class="n">my_model</span><span class="o">.</span><span class="n">build_model_function</span> <span class="o">=</span> <span class="n">my_model_builder</span>
</pre></div>
</div>
<section id="note-about-hardcoding-model-layer-parameters">
<h4 id="note-about-hardcoding-model-layer-parameters">Note about hardcoding model layer parameters<a class="headerlink" href="#note-about-hardcoding-model-layer-parameters" title="Permalink to this headline">¶</a></h4>
<p>While not required, the <code class="docutils literal notranslate"><span class="pre">my_model</span></code> argument to the building function
should be used over hardcoded values, e.g.:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Good:</span>
<span class="c1"># Dynamically determine the number of dense unit based</span>
<span class="c1"># on the number of classes specified in the model properties</span>
<span class="n">keras_model</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">Dense</span><span class="p">(</span><span class="n">units</span><span class="o">=</span><span class="n">my_model</span><span class="o">.</span><span class="n">n_classes</span><span class="p">))</span>

<span class="c1"># Bad:</span>
<span class="c1"># Hardcoding dense units</span>
<span class="c1"># If the number of classes changes, </span>
<span class="c1"># then training will likely fail</span>
<span class="n">keras_model</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">Dense</span><span class="p">(</span><span class="n">units</span><span class="o">=</span><span class="mi">5</span><span class="p">))</span>
</pre></div>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<ul class="simple">
<li><p><a class="reference internal" href="../python_api/core/mltk_model.html#mltk.core.TrainMixin.build_model_function" title="mltk.core.TrainMixin.build_model_function"><span class="xref myst py py-attr">TrainMixin.build_model_function</span></a></p></li>
<li><p><a class="reference external" href="https://keras.io/api">Keras API</a></p></li>
</ul>
</div>
</section>
</section>
<section id="general-settings">
<h3 id="general-settings">General Settings<a class="headerlink" href="#general-settings" title="Permalink to this headline">¶</a></h3>
<p>This section contains basic information about the model such as its version and description, e.g.:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">my_model</span><span class="o">.</span><span class="n">version</span> <span class="o">=</span> <span class="mi">1</span>
<span class="n">my_model</span><span class="o">.</span><span class="n">description</span> <span class="o">=</span> <span class="s1">'My model is great!'</span>
</pre></div>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<ul class="simple">
<li><p><a class="reference internal" href="../python_api/core/mltk_model.html#mltk.core.MltkModel.version" title="mltk.core.MltkModel.version"><span class="xref myst py py-attr">MltkModel.version</span></a></p></li>
<li><p><a class="reference internal" href="../python_api/core/mltk_model.html#mltk.core.MltkModel.description" title="mltk.core.MltkModel.description"><span class="xref myst py py-attr">MltkModel.description</span></a></p></li>
<li><p><a class="reference internal" href="../python_api/core/mltk_model.html#mltk.core.MltkModel.log_dir" title="mltk.core.MltkModel.log_dir"><span class="xref myst py py-attr">MltkModel.log_dir</span></a></p></li>
</ul>
</div>
</section>
<section id="basic-training-settings">
<h3 id="basic-training-settings">Basic Training Settings<a class="headerlink" href="#basic-training-settings" title="Permalink to this headline">¶</a></h3>
<p>This section contains basic training settings such as the number of epochs and batch size, e.g.:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">my_model</span><span class="o">.</span><span class="n">epochs</span> <span class="o">=</span> <span class="mi">100</span>
<span class="n">my_model</span><span class="o">.</span><span class="n">batch_size</span> <span class="o">=</span> <span class="mi">64</span> 
<span class="n">my_model</span><span class="o">.</span><span class="n">optimizer</span> <span class="o">=</span> <span class="s1">'adam'</span>
</pre></div>
</div>
<p>Also see:</p>
<ul class="simple">
<li><p><a class="reference internal" href="../python_api/core/mltk_model.html#mltk.core.TrainMixin" title="mltk.core.TrainMixin"><span class="xref myst py py-class">TrainMixin</span></a></p></li>
<li><p><a class="reference internal" href="../python_api/core/mltk_model.html#mltk.core.TrainMixin.epochs" title="mltk.core.TrainMixin.epochs"><span class="xref myst py py-attr">TrainMixin.epochs</span></a></p></li>
<li><p><a class="reference internal" href="../python_api/core/mltk_model.html#mltk.core.TrainMixin.batch_size" title="mltk.core.TrainMixin.batch_size"><span class="xref myst py py-attr">TrainMixin.batch_size</span></a></p></li>
<li><p><a class="reference internal" href="../python_api/core/mltk_model.html#mltk.core.TrainMixin.optimizer" title="mltk.core.TrainMixin.optimizer"><span class="xref myst py py-attr">TrainMixin.optimizer</span></a></p></li>
<li><p><a class="reference internal" href="../python_api/core/mltk_model.html#mltk.core.TrainMixin.metrics" title="mltk.core.TrainMixin.metrics"><span class="xref myst py py-attr">TrainMixin.metrics</span></a></p></li>
<li><p><a class="reference internal" href="../python_api/core/mltk_model.html#mltk.core.TrainMixin.loss" title="mltk.core.TrainMixin.loss"><span class="xref myst py py-attr">TrainMixin.loss</span></a></p></li>
</ul>
</section>
<section id="training-keras-callback-settings">
<h3 id="training-keras-callback-settings">Training Keras Callback Settings<a class="headerlink" href="#training-keras-callback-settings" title="Permalink to this headline">¶</a></h3>
<p>Tensorflow/Keras supports various <a class="reference external" href="https://www.tensorflow.org/api_docs/python/tf/keras/callbacks">callbacks</a> while training.<br/>
The MLTK provides properties for some of the more common callbacks, e.g.:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># https://keras.io/api/callbacks/reduce_lr_on_plateau/</span>
<span class="n">my_model</span><span class="o">.</span><span class="n">reduce_lr_on_plateau</span><span class="p">[</span><span class="s1">'monitor'</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'accuracy'</span>
<span class="n">my_model</span><span class="o">.</span><span class="n">reduce_lr_on_plateau</span><span class="p">[</span><span class="s1">'factor'</span><span class="p">]</span> <span class="o">=</span>  <span class="mf">0.25</span>
<span class="n">my_model</span><span class="o">.</span><span class="n">reduce_lr_on_plateau</span><span class="p">[</span><span class="s1">'patience'</span><span class="p">]</span> <span class="o">=</span> <span class="mi">25</span>
</pre></div>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<ul class="simple">
<li><p><a class="reference internal" href="model_training.html"><span class="doc std std-doc">Model Training</span></a></p></li>
<li><p><a class="reference internal" href="../python_api/core/mltk_model.html#mltk.core.TrainMixin" title="mltk.core.TrainMixin"><span class="xref myst py py-class">TrainMixin</span></a></p></li>
<li><p><a class="reference internal" href="../python_api/core/mltk_model.html#mltk.core.TrainMixin.train_callbacks" title="mltk.core.TrainMixin.train_callbacks"><span class="xref myst py py-attr">TrainMixin.train_callbacks</span></a></p></li>
<li><p><a class="reference internal" href="../python_api/core/mltk_model.html#mltk.core.TrainMixin.lr_schedule" title="mltk.core.TrainMixin.lr_schedule"><span class="xref myst py py-attr">TrainMixin.lr_schedule</span></a></p></li>
<li><p><a class="reference internal" href="../python_api/core/mltk_model.html#mltk.core.TrainMixin.reduce_lr_on_plateau" title="mltk.core.TrainMixin.reduce_lr_on_plateau"><span class="xref myst py py-attr">TrainMixin.reduce_lr_on_plateau</span></a></p></li>
<li><p><a class="reference internal" href="../python_api/core/mltk_model.html#mltk.core.TrainMixin.tensorboard" title="mltk.core.TrainMixin.tensorboard"><span class="xref myst py py-attr">TrainMixin.tensorboard</span></a></p></li>
<li><p><a class="reference internal" href="../python_api/core/mltk_model.html#mltk.core.TrainMixin.checkpoint" title="mltk.core.TrainMixin.checkpoint"><span class="xref myst py py-attr">TrainMixin.checkpoint</span></a></p></li>
<li><p><a class="reference internal" href="../python_api/core/mltk_model.html#mltk.core.TrainMixin.early_stopping" title="mltk.core.TrainMixin.early_stopping"><span class="xref myst py py-attr">TrainMixin.early_stopping</span></a></p></li>
</ul>
</div>
</section>
<section id="tensorflow-lite-converter-settings">
<h3 id="tensorflow-lite-converter-settings">Tensorflow-Lite Converter Settings<a class="headerlink" href="#tensorflow-lite-converter-settings" title="Permalink to this headline">¶</a></h3>
<p>At the end of training, a quantized <code class="docutils literal notranslate"><span class="pre">.tflite</span></code> model file is generated.
This is the file that is programmed into the embedded device and executed by <a class="reference external" href="https://github.com/tensorflow/tflite-micro">Tensorflow-Lite Micro</a>.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">.tflite</span></code> is generated by the Tensorflow-Lite <a class="reference external" href="https://www.tensorflow.org/lite/convert">Converter</a>.
The settings for the converter are defined in the model specification script using the model property: <a class="reference internal" href="../python_api/core/mltk_model.html#mltk.core.TrainMixin.tflite_converter" title="mltk.core.TrainMixin.tflite_converter"><span class="xref myst py py-attr">TrainMixin.tflite_converter</span></a>.</p>
<p>For example, the model specification script might have:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">my_model</span><span class="o">.</span><span class="n">tflite_converter</span><span class="p">[</span><span class="s1">'optimizations'</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="n">tf</span><span class="o">.</span><span class="n">lite</span><span class="o">.</span><span class="n">Optimize</span><span class="o">.</span><span class="n">DEFAULT</span><span class="p">]</span>
<span class="n">my_model</span><span class="o">.</span><span class="n">tflite_converter</span><span class="p">[</span><span class="s1">'supported_ops'</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="n">tf</span><span class="o">.</span><span class="n">lite</span><span class="o">.</span><span class="n">OpsSet</span><span class="o">.</span><span class="n">TFLITE_BUILTINS_INT8</span><span class="p">]</span>
<span class="n">my_model</span><span class="o">.</span><span class="n">tflite_converter</span><span class="p">[</span><span class="s1">'inference_input_type'</span><span class="p">]</span> <span class="o">=</span> <span class="n">tf</span><span class="o">.</span><span class="n">int8</span>
<span class="n">my_model</span><span class="o">.</span><span class="n">tflite_converter</span><span class="p">[</span><span class="s1">'inference_output_type'</span><span class="p">]</span> <span class="o">=</span> <span class="n">tf</span><span class="o">.</span><span class="n">int8</span>
<span class="n">my_model</span><span class="o">.</span><span class="n">tflite_converter</span><span class="p">[</span><span class="s1">'representative_dataset'</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'generate'</span>
</pre></div>
</div>
<p>These settings are used at the end of training to generate the <code class="docutils literal notranslate"><span class="pre">.tflite</span></code>.<br/>
See <a class="reference internal" href="model_quantization.html"><span class="doc std std-doc">Model Quantization</span></a> for more details.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<ul class="simple">
<li><p><a class="reference internal" href="model_quantization.html"><span class="doc std std-doc">Model Quantization</span></a></p></li>
<li><p><a class="reference internal" href="../python_api/core/mltk_model.html#mltk.core.TrainMixin.tflite_converter" title="mltk.core.TrainMixin.tflite_converter"><span class="xref myst py py-attr">TrainMixin.tflite_converter</span></a></p></li>
<li><p><a class="reference external" href="https://www.tensorflow.org/api_docs/python/tf/lite/TFLiteConverter">TFLiteConverter</a></p></li>
<li><p><a class="reference external" href="https://www.tensorflow.org/lite/performance/post_training_quantization">Post-training Quantization</a></p></li>
</ul>
</div>
</section>
<section id="basic-dataset-settings">
<h3 id="basic-dataset-settings">Basic Dataset Settings<a class="headerlink" href="#basic-dataset-settings" title="Permalink to this headline">¶</a></h3>
<p>Basic dataset settings includes information such as the dataset directory, the “class mode”, the class labels, input shape, etc. These settings are strongly dependent on the type of machine learning model that is being trained and/or evaluated.</p>
<p>At a minimum, the <a class="reference internal" href="../python_api/core/mltk_model.html#mltk.core.DatasetMixin" title="mltk.core.DatasetMixin"><span class="xref myst py py-class">DatasetMixin</span></a> should be inherited by the model specification’s <a class="reference internal" href="../python_api/core/mltk_model.html#mltk.core.MltkModel" title="mltk.core.MltkModel"><span class="xref myst py py-class">MltkModel</span></a> class. This mixin is generic and its properties directly map to the parameters required by
<a class="reference external" href="https://www.tensorflow.org/api_docs/python/tf/keras/Model#fit">KerasModel.fit()</a> (the Tensorflow function that actually trains the model)</p>
<p>Alternatively, the MLTK features other dataset mixins that are specific to the dataset type:</p>
<ul class="simple">
<li><p><a class="reference internal" href="../python_api/core/mltk_model.html#mltk.core.AudioDatasetMixin" title="mltk.core.AudioDatasetMixin"><span class="xref myst py py-class">AudioDatasetMixin</span></a> - Used for audio datasets (i.e. the samples in the dataset are audio files)</p></li>
<li><p><a class="reference internal" href="../python_api/core/mltk_model.html#mltk.core.ImageDatasetMixin" title="mltk.core.ImageDatasetMixin"><span class="xref myst py py-class">ImageDatasetMixin</span></a> - Used for image datasets (i.e. the samples in the dataset are images)</p></li>
</ul>
<p>These are useful as they manage some of the details required to process these types of datasets (whereas the <a class="reference internal" href="../python_api/core/mltk_model.html#mltk.core.DatasetMixin" title="mltk.core.DatasetMixin"><span class="xref myst py py-class">DatasetMixin</span></a> is generic and all details must be handled manually).</p>
<p>For example, an audio-based model specification script might have:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">mltk_model</span><span class="o">.</span><span class="n">dataset</span> <span class="o">=</span> <span class="n">speech_commands_v2</span>
<span class="n">mltk_model</span><span class="o">.</span><span class="n">class_mode</span> <span class="o">=</span> <span class="s1">'categorical'</span>
<span class="n">mltk_model</span><span class="o">.</span><span class="n">classes</span> <span class="o">=</span> <span class="p">[</span><span class="s1">'up'</span><span class="p">,</span> <span class="s1">'down'</span><span class="p">,</span> <span class="s1">'left'</span><span class="p">,</span> <span class="s1">'right'</span><span class="p">]</span>
</pre></div>
</div>
<p>Alternatively, an image-based model specification script might have:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">mltk_model</span><span class="o">.</span><span class="n">dataset</span> <span class="o">=</span> <span class="n">rock_paper_scissors_v1</span>
<span class="n">mltk_model</span><span class="o">.</span><span class="n">class_mode</span> <span class="o">=</span> <span class="s1">'categorical'</span>
<span class="n">mltk_model</span><span class="o">.</span><span class="n">classes</span> <span class="o">=</span> <span class="p">[</span><span class="s1">'rock'</span><span class="p">,</span> <span class="s1">'paper'</span><span class="p">,</span> <span class="s1">'scissors'</span><span class="p">]</span>
<span class="n">mltk_model</span><span class="o">.</span><span class="n">input_shape</span> <span class="o">=</span> <span class="p">(</span><span class="mi">96</span><span class="p">,</span> <span class="mi">96</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
</pre></div>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<ul class="simple">
<li><p><a class="reference internal" href="../python_api/core/mltk_model.html#mltk.core.DatasetMixin" title="mltk.core.DatasetMixin"><span class="xref myst py py-class">DatasetMixin</span></a></p></li>
<li><p><a class="reference internal" href="../python_api/core/mltk_model.html#mltk.core.AudioDatasetMixin" title="mltk.core.AudioDatasetMixin"><span class="xref myst py py-class">AudioDatasetMixin</span></a></p></li>
<li><p><a class="reference internal" href="../python_api/core/mltk_model.html#mltk.core.ImageDatasetMixin" title="mltk.core.ImageDatasetMixin"><span class="xref myst py py-class">ImageDatasetMixin</span></a></p></li>
</ul>
</div>
</section>
<section id="dataset-augmentation-settings">
<h3 id="dataset-augmentation-settings">Dataset Augmentation Settings<a class="headerlink" href="#dataset-augmentation-settings" title="Permalink to this headline">¶</a></h3>
<p>The <a class="reference internal" href="../python_api/core/mltk_model.html#mltk.core.AudioDatasetMixin" title="mltk.core.AudioDatasetMixin"><span class="xref myst py py-class">AudioDatasetMixin</span></a> and <a class="reference internal" href="../python_api/core/mltk_model.html#mltk.core.ImageDatasetMixin" title="mltk.core.ImageDatasetMixin"><span class="xref myst py py-class">ImageDatasetMixin</span></a> mixins
are useful because they allow for augmenting the dataset during training (which is useful as it effectively increases the size of the dataset which can lead to a more robust model).</p>
<p>These settings are configured in the <a class="reference internal" href="../python_api/core/mltk_model.html#mltk.core.AudioDatasetMixin.datagen" title="mltk.core.AudioDatasetMixin.datagen"><span class="xref myst py py-attr">AudioDatasetMixin.datagen</span></a> and <a class="reference internal" href="../python_api/core/mltk_model.html#mltk.core.ImageDatasetMixin.datagen" title="mltk.core.ImageDatasetMixin.datagen"><span class="xref myst py py-attr">ImageDatasetMixin.datagen</span></a> properties.</p>
<p>For example, an audio-based model specification script might have:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">mltk_model</span><span class="o">.</span><span class="n">datagen</span> <span class="o">=</span> <span class="n">ParallelAudioDataGenerator</span><span class="p">(</span>
    <span class="n">unknown_class_percentage</span><span class="o">=</span><span class="mf">3.0</span><span class="p">,</span>
    <span class="n">silence_class_percentage</span><span class="o">=</span><span class="mf">0.2</span><span class="p">,</span>
    <span class="n">offset_range</span><span class="o">=</span><span class="p">(</span><span class="mf">0.0</span><span class="p">,</span><span class="mf">1.0</span><span class="p">),</span>
    <span class="n">trim_threshold_db</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span>
    <span class="n">noise_colors</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">bg_noise_range</span><span class="o">=</span><span class="p">(</span><span class="mf">0.0</span><span class="p">,</span><span class="mf">0.3</span><span class="p">),</span>
    <span class="n">bg_noise_dir</span><span class="o">=</span><span class="s1">'_background_noise_'</span>
<span class="p">)</span>
</pre></div>
</div>
<p>Alternatively, an image-based model specification script might have:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">my_model</span><span class="o">.</span><span class="n">datagen</span> <span class="o">=</span> <span class="n">ParallelImageDataGenerator</span><span class="p">(</span>
    <span class="n">rotation_range</span><span class="o">=</span><span class="mi">35</span><span class="p">,</span>
    <span class="n">contrast_range</span><span class="o">=</span><span class="p">(</span><span class="mf">0.50</span><span class="p">,</span> <span class="mf">1.70</span><span class="p">),</span>
    <span class="n">noise</span><span class="o">=</span><span class="p">[</span><span class="s1">'gauss'</span><span class="p">,</span> <span class="s1">'poisson'</span><span class="p">,</span> <span class="s1">'s&amp;p'</span><span class="p">],</span>
    <span class="n">horizontal_flip</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="n">vertical_flip</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<ul class="simple">
<li><p><a class="reference internal" href="../python_api/core/mltk_model.html#mltk.core.AudioDatasetMixin" title="mltk.core.AudioDatasetMixin"><span class="xref myst py py-class">AudioDatasetMixin</span></a></p></li>
<li><p><a class="reference internal" href="../python_api/core/mltk_model.html#mltk.core.ImageDatasetMixin" title="mltk.core.ImageDatasetMixin"><span class="xref myst py py-class">ImageDatasetMixin</span></a></p></li>
<li><p><a class="reference internal" href="../python_api/data_preprocessing/audio_data_generator.html#mltk.core.preprocess.audio.parallel_generator.ParallelAudioDataGenerator" title="mltk.core.preprocess.audio.parallel_generator.ParallelAudioDataGenerator"><span class="xref myst py py-class">ParallelAudioDataGenerator</span></a></p></li>
<li><p><a class="reference internal" href="../python_api/data_preprocessing/image_data_generator.html#mltk.core.preprocess.image.parallel_generator.ParallelImageDataGenerator" title="mltk.core.preprocess.image.parallel_generator.ParallelImageDataGenerator"><span class="xref myst py py-class">ParallelImageDataGenerator</span></a></p></li>
</ul>
</div>
</section>
<section id="evaluation-settings">
<h3 id="evaluation-settings">Evaluation Settings<a class="headerlink" href="#evaluation-settings" title="Permalink to this headline">¶</a></h3>
<p>While an important aspect of the model specification script is configuring
the training settings, it can also be used for configuring the model evaluation settings.</p>
<p><a class="reference internal" href="model_evaluation.html"><span class="doc std std-doc">Model evaluation</span></a> is enabled by inheriting one of the following mixins:</p>
<ul class="simple">
<li><p><a class="reference internal" href="../python_api/core/mltk_model.html#mltk.core.EvaluateClassifierMixin" title="mltk.core.EvaluateClassifierMixin"><span class="xref myst py py-class">EvaluateClassifierMixin</span></a> - Evaluate a classification model</p></li>
<li><p><a class="reference internal" href="../python_api/core/mltk_model.html#mltk.core.EvaluateAutoEncoderMixin" title="mltk.core.EvaluateAutoEncoderMixin"><span class="xref myst py py-class">EvaluateAutoEncoderMixin</span></a> - Evaluate an auto-encoder model</p></li>
</ul>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<ul class="simple">
<li><p><a class="reference internal" href="model_evaluation.html"><span class="doc std std-doc">Model evaluation</span></a></p></li>
<li><p><a class="reference internal" href="../python_api/core/mltk_model.html#mltk.core.EvaluateClassifierMixin" title="mltk.core.EvaluateClassifierMixin"><span class="xref myst py py-class">EvaluateClassifierMixin</span></a></p></li>
<li><p><a class="reference internal" href="../python_api/core/mltk_model.html#mltk.core.EvaluateAutoEncoderMixin" title="mltk.core.EvaluateAutoEncoderMixin"><span class="xref myst py py-class">EvaluateAutoEncoderMixin</span></a></p></li>
</ul>
</div>
</section>
<section id="additional-parameters">
<h3 id="additional-parameters">Additional Parameters<a class="headerlink" href="#additional-parameters" title="Permalink to this headline">¶</a></h3>
<p>Additional parameters can also be added to the model specification.<br/>
<a class="reference internal" href="model_parameters.html"><span class="doc std std-doc">Model Parameters</span></a> are user-defined and are added to the “metadata” section
of the generated <code class="docutils literal notranslate"><span class="pre">.tflite</span></code> model file.</p>
<p>For example, a model specification script might have:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Set the volume (in dB) scaler (i.e. amplitude) to apply to the microphone data. If 0 or omitted, no scaler is applied</span>
<span class="n">mltk_model</span><span class="o">.</span><span class="n">model_parameters</span><span class="p">[</span><span class="s1">'volume_db'</span><span class="p">]</span> <span class="o">=</span> <span class="mf">5.0</span>
<span class="c1"># This simulates the amount of time in milliseconds an audio loop takes. This helps to provide a better idea of how well the given model will execute on an embedded device</span>
<span class="n">mltk_model</span><span class="o">.</span><span class="n">model_parameters</span><span class="p">[</span><span class="s1">'latency_ms'</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>
<span class="c1"># Console logging level, set to 'debug' to enable verbose logging</span>
<span class="n">mltk_model</span><span class="o">.</span><span class="n">model_parameters</span><span class="p">[</span><span class="s1">'log_level'</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'info'</span>
</pre></div>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<ul class="simple">
<li><p><a class="reference internal" href="model_parameters.html"><span class="doc std std-doc">Model Parameters</span></a></p></li>
<li><p><a class="reference internal" href="../python_api/core/mltk_model.html#mltk.core.MltkModel.model_parameters" title="mltk.core.MltkModel.model_parameters"><span class="xref myst py py-attr">MltkModel.model_parameters</span></a></p></li>
</ul>
</div>
</section>
</section>
<section id="examples">
<h2 id="examples">Examples<a class="headerlink" href="#examples" title="Permalink to this headline">¶</a></h2>
<p>See the <a class="reference internal" href="../python_api/models/index.html"><span class="doc std std-doc">reference models</span></a> for complete model specification scripts:</p>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/siliconlabs/mltk/blob/master/mltk/models/siliconlabs/keyword_spotting_on_off.py">siliconlabs.keyword_spotting_on_off</a></p></li>
<li><p><a class="reference external" href="https://github.com/siliconlabs/mltk/blob/master/mltk/models/examples/image_example1.py">examples.image_example1</a></p></li>
<li><p><a class="reference external" href="https://github.com/siliconlabs/mltk/blob/master/mltk/models/examples/audio_example1.py">examples.audio_example1</a></p></li>
<li><p><a class="reference external" href="https://github.com/siliconlabs/mltk/blob/master/mltk/models/examples/conv1d_example.py">examples.conv1d_example</a></p></li>
<li><p><a class="reference external" href="https://github.com/siliconlabs/mltk/blob/master/mltk/models/examples/siamese_contrastive.py">examples.siamese_contrastive</a></p></li>
<li><p><a class="reference external" href="https://github.com/siliconlabs/mltk/blob/master/mltk/models/tflite_micro/tflite_micro_speech.py">tflite_micro.tflite_micro_speech</a></p></li>
<li><p><a class="reference external" href="https://github.com/siliconlabs/mltk/blob/master/mltk/models/tflite_micro/tflite_micro_magic_wand.py">tflite_micro.tflite_micro_magic_wand</a></p></li>
<li><p><a class="reference external" href="https://github.com/siliconlabs/mltk/blob/master/mltk/models/tinyml/anomaly_detection.py">tinyml.anomaly_detection</a></p></li>
<li><p><a class="reference external" href="https://github.com/siliconlabs/mltk/blob/master/mltk/models/tinyml/image_classification.py">tinyml.image_classification</a></p></li>
<li><p><a class="reference external" href="https://github.com/siliconlabs/mltk/blob/master/mltk/models/tinyml/keyword_spotting.py">tinyml.keyword_spotting</a></p></li>
<li><p><a class="reference external" href="https://github.com/siliconlabs/mltk/blob/master/mltk/models/tinyml/visual_wake_words.py">tinyml.visual_wake_words</a></p></li>
</ul>
</section>
</section>


          </article>
        </div>
      </div>
    </main>
  </div>
  <footer class="md-footer">
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
          
            <a href="model_visualizer.html" title="Model Visualizer"
               class="md-flex md-footer-nav__link md-footer-nav__link--prev"
               rel="prev">
              <div class="md-flex__cell md-flex__cell--shrink">
                <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
              </div>
              <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
                <span class="md-flex__ellipsis">
                  <span
                      class="md-footer-nav__direction"> Previous </span> Model Visualizer </span>
              </div>
            </a>
          
          
            <a href="model_training.html" title="Model Training"
               class="md-flex md-footer-nav__link md-footer-nav__link--next"
               rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title"><span
                class="md-flex__ellipsis"> <span
                class="md-footer-nav__direction"> Next </span> Model Training </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink"><i
                class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          
        </a>
        
      </nav>
    </div>
    <div class="md-footer-meta md-typeset">
      <div class="md-footer-meta__inner md-grid">
        <div class="md-footer-copyright">
          <div class="md-footer-copyright__highlight">
              &#169; Copyright 2022, Silicon Labs.
              
          </div>
            Last updated on
              Jun 14, 2022.
            <br/>
            Created using
            <a href="http://www.sphinx-doc.org/">Sphinx</a> 4.5.0.
             and
            <a href="https://github.com/bashtage/sphinx-material/">Material for
              Sphinx</a>
        </div>
        <div class="survey-link" id="dlg-survey-link"> 
    <div>We need your feedback!</div>
    <div>
        Please take this short <a id="survey-link">survey<i class="md-icon pulse">chevron_right</i></a>
    </div>
</div>
      </div>
    </div>
  </footer>
  <div class="privacy-banner">
    <div class="privacy-banner-wrapper">
      <p>
        <b>Important:</b> This site uses cookies to improve user experience and stores information on your computer. 
        By continuing to use our site, you consent to our <a class="privacy-policy" href="https://www.silabs.com/about-us/legal/cookie-policy" target="_blank">Cookie Policy</a>. 
        If you do not want to enable cookies, review our policy and learn how they can be disabled. Note that disabling cookies will disable some features of the site.
      </p>
      <a class="privacy-banner-accept" href="#">Accept</a>
    </div>
</div>
  
<div class="survey-container" id="dlg-survey"> 
    <div class="close" id="dlg-survey-close"><i class="md-icon">close</i></div>
    <iframe id="iframe-survey" style="width: 100%; height: 100%;"></iframe>
</div>
  
  <script src="../../_static/javascripts/application.js"></script>
  <script>app.initialize({version: "1.0.4", url: {base: ".."}})</script>
  </body>
</html>