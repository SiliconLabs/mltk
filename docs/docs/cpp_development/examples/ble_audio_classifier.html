
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

  <meta name="viewport" content="width=device-width,initial-scale=1">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <meta name="title" content="Machine Learning Toolkit">
<meta name="description" content="A Python package with command-line utilities and scripts to aid the development of machine learning models for Silicon Lab's embedded platforms">
<meta name="keywords" content="machine learning, machine-learning, machinelearning, ml, ai, iot, Internet of things, aiot, tinyml, tensorflow, tensorflow-lite, tensorflow-lite-micro, keras-tensorflow, keras, tflite, embedded, embedded-systems, mcu, Microcontrollers, hardware, python, c++, cmake, keras, numpy, silabs, silicon labs">
<meta name="robots" content="index, follow">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="language" content="English">
<meta name="author" content="Silicon Labs">
  <meta name="lang:clipboard.copy" content="Copy to clipboard">
  <meta name="lang:clipboard.copied" content="Copied to clipboard">
  <meta name="lang:search.language" content="en">
  <meta name="lang:search.pipeline.stopwords" content="True">
  <meta name="lang:search.pipeline.trimmer" content="True">
  <meta name="lang:search.result.none" content="No matching documents">
  <meta name="lang:search.result.one" content="1 matching document">
  <meta name="lang:search.result.other" content="# matching documents">
  <meta name="lang:search.tokenizer" content="[\s\-]+">

  
    <link href="https://fonts.googleapis.com/css?family=Roboto+Mono:400,500,700|Roboto:300,400,400i,700&display=fallback" rel="stylesheet">

    <style>
      body,
      input {
        font-family: "Roboto", "Helvetica Neue", Helvetica, Arial, sans-serif
      }

      code,
      kbd,
      pre {
        font-family: "Roboto Mono", "Courier New", Courier, monospace
      }
    </style>
  

  <link rel="stylesheet" href="../../../_static/stylesheets/application.css"/>
  <link rel="stylesheet" href="../../../_static/stylesheets/application-palette.css"/>
  <link rel="stylesheet" href="../../../_static/stylesheets/application-fixes.css"/>
  
  <link rel="stylesheet" href="../../../_static/fonts/material-icons.css"/>
  
  <meta name="theme-color" content="#3f51b5">
  <script src="../../../_static/javascripts/modernizr.js"></script>
  
<script async src="https://www.googletagmanager.com/gtag/js?id=G-HZ5MW943WF"></script>
<script>
    window.gTrackingId = 'G-HZ5MW943WF';
</script>
<meta name="google-site-verification" content="dsSsmnE2twOnfSAQk5zBBTrjMArsTJj809Bp-8mVlIw" />
  
  
    <title>BLE Audio Classifier &#8212; MLTK 0.18.0 documentation</title>
    <link rel="stylesheet" type="text/css" href="../../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/material.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/design-style.4045f2051d55cab465a707391d5b2007.min.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/css/custom.css" />
    <script data-url_root="../../../" id="documentation_options" src="../../../_static/documentation_options.js"></script>
    <script src="../../../_static/jquery.js"></script>
    <script src="../../../_static/underscore.js"></script>
    <script src="../../../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../../../_static/doctools.js"></script>
    <script src="../../../_static/sphinx_highlight.js"></script>
    <script src="../../../_static/clipboard.min.js"></script>
    <script src="../../../_static/copybutton.js"></script>
    <script src="../../../_static/design-tabs.js"></script>
    <script src="../../../_static/js/custom.js"></script>
    <script src="../../../_static/js/apitoc.js"></script>
    <link rel="shortcut icon" href="../../../_static/favicon.ico"/>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="Image Classifier" href="image_classifier.html" />
    <link rel="prev" title="Audio Classifier" href="audio_classifier.html" />
  
   

  </head>
  <body dir=ltr
        data-md-color-primary=red data-md-color-accent=light-blue>
  
  <svg class="md-svg">
    <defs data-children-count="0">
      
      <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448" viewBox="0 0 416 448" id="__github"><path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19T128 352t-18.125-8.5-10.75-19T96 304t3.125-20.5 10.75-19T128 256t18.125 8.5 10.75 19T160 304zm160 0q0 10-3.125 20.5t-10.75 19T288 352t-18.125-8.5-10.75-19T256 304t3.125-20.5 10.75-19T288 256t18.125 8.5 10.75 19T320 304zm40 0q0-30-17.25-51T296 232q-10.25 0-48.75 5.25Q229.5 240 208 240t-39.25-2.75Q130.75 232 120 232q-29.5 0-46.75 21T56 304q0 22 8 38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0 37.25-1.75t35-7.375 30.5-15 20.25-25.75T360 304zm56-44q0 51.75-15.25 82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5T212 416q-19.5 0-35.5-.75t-36.875-3.125-38.125-7.5-34.25-12.875T37 371.5t-21.5-28.75Q0 312 0 260q0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25 30.875Q171.5 96 212 96q37 0 70 8 26.25-20.5 46.75-30.25T376 64q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34 99.5z"/></svg>
      
    </defs>
  </svg>
  
  <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer">
  <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search">
  <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
  <a href="#docs/cpp_development/examples/ble_audio_classifier" tabindex="1" class="md-skip"> Skip to content </a>
  <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex navheader">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="../../../index.html" title="MLTK 0.18.0 documentation"
           class="md-header-nav__button md-logo">
          
              <img src="../../../_static/logo.png"
                   alt="MLTK 0.18.0 documentation logo">
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          <span class="md-header-nav__topic">Machine Learning Toolkit</span>
          <span class="md-header-nav__topic"> BLE Audio Classifier </span>
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
        
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" action="../../../search.html" method="get" name="search">
      <input type="text" class="md-search__input" name="q" placeholder=""Search""
             autocapitalize="off" autocomplete="off" spellcheck="false"
             data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>

      </div>
      
        <div class="md-flex__cell md-flex__cell--shrink">
          <div class="md-header-nav__source">
            <a href="https://github.com/siliconlabs/mltk" title="Go to repository" class="md-source" data-md-source="github">

    <div class="md-source__icon">
      <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 24 24" width="28" height="28">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    MLTK Github Repository
  </div>
</a>
          </div>
        </div>
      
      
    </div>
  </nav>
</header>

  
  <div class="md-container">
    
    
    
  <nav class="md-tabs" data-md-component="tabs">
    <div class="md-tabs__inner md-grid">
      <ul class="md-tabs__list">
            
            <li class="md-tabs__item"><a href="https://docs.silabs.com/gecko-platform/latest/machine-learning/tensorflow/overview" class="md-tabs__link">Gecko SDK Documentation</a></li>
            
            <li class="md-tabs__item"><a href="https://github.com/tensorflow/tflite-micro" class="md-tabs__link">Tensorflow-Lite Micro Repository</a></li>
            
            <li class="md-tabs__item"><a href="https://www.tensorflow.org/learn" class="md-tabs__link">Tensorflow Documentation</a></li>
          <li class="md-tabs__item"><a href="../index.html" class="md-tabs__link">C++ Development</a></li>
          <li class="md-tabs__item"><a href="index.html" class="md-tabs__link">C++ Examples</a></li>
      </ul>
    </div>
  </nav>
    <main class="md-main">
      <div class="md-main__inner md-grid" data-md-component="container">
        
          <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
            <div class="md-sidebar__scrollwrap">
              <div class="md-sidebar__inner">
                <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href="../../../index.html" title="MLTK 0.18.0 documentation" class="md-nav__button md-logo">
      
        <img src="../../../_static/logo.png" alt=" logo" width="48" height="48">
      
    </a>
    <a href="../../../index.html"
       title="MLTK 0.18.0 documentation">Machine Learning Toolkit</a>
  </label>
    <div class="md-nav__source">
      <a href="https://github.com/siliconlabs/mltk" title="Go to repository" class="md-source" data-md-source="github">

    <div class="md-source__icon">
      <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 24 24" width="28" height="28">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    MLTK Github Repository
  </div>
</a>
    </div>
  
  

  
  <ul class="md-nav__list">
    <li class="md-nav__item">
    
      <span class="md-nav__link caption"><span class="caption-text">Basics</span></span>
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../../overview.html" class="md-nav__link">Overview</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../../why_mltk.html" class="md-nav__link">Why MLTK?</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../../installation.html" class="md-nav__link">Installation</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../../command_line/index.html" class="md-nav__link">Command-Line</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../../guides/index.html" class="md-nav__link">Modeling Guides</a>
      
    
    </li>
    <li class="md-nav__item">
    
      <span class="md-nav__link caption"><span class="caption-text">Usage</span></span>
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../../tutorials.html" class="md-nav__link">Tutorials</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../../examples.html" class="md-nav__link">API Examples</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../../python_api/index.html" class="md-nav__link">API Reference</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../../python_api/models/index.html" class="md-nav__link">Reference Models</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../../python_api/datasets/index.html" class="md-nav__link">Reference Datasets</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../index.html" class="md-nav__link">C++ Development</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="index.html" class="md-nav__link">C++ Examples</a>
      <ul class="md-nav__list"> 
    <li class="md-nav__item">
    
    
      <a href="hello_world.html" class="md-nav__link">Hello World</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="model_profiler.html" class="md-nav__link">Model Profiler</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="audio_classifier.html" class="md-nav__link">Audio Classifier</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    <label class="md-nav__link md-nav__link--active" for="__toc"> BLE Audio Classifier </label>
    
      <a href="#" class="md-nav__link md-nav__link--active">BLE Audio Classifier</a>
      
        
<nav class="md-nav md-nav--secondary">
    <label class="md-nav__title" for="__toc">Contents</label>
  <ul class="md-nav__list" data-md-scrollfix="" id="localtoc">
        <li class="md-nav__item"><a href="#docs-cpp-development-examples-ble-audio-classifier--page-root" class="md-nav__link">BLE Audio Classifier</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#quick-links" class="md-nav__link">Quick Links</a>
        </li>
        <li class="md-nav__item"><a href="#pac-man-demo" class="md-nav__link">Pac-Man Demo</a>
        </li>
        <li class="md-nav__item"><a href="#behavior" class="md-nav__link">Behavior</a>
        </li>
        <li class="md-nav__item"><a href="#updating-the-model" class="md-nav__link">Updating the model</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#via-simplicity-studio" class="md-nav__link">via Simplicity Studio</a>
        </li>
        <li class="md-nav__item"><a href="#via-cmake" class="md-nav__link">via CMake</a>
        </li></ul>
            </nav>
        </li>
        <li class="md-nav__item"><a href="#build-run-debug" class="md-nav__link">Build, Run, Debug</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#simplicity-studio" class="md-nav__link">Simplicity Studio</a>
        </li>
        <li class="md-nav__item"><a href="#visual-studio-code" class="md-nav__link">Visual Studio Code</a>
        </li>
        <li class="md-nav__item"><a href="#command-line" class="md-nav__link">Command-line</a>
        </li></ul>
            </nav>
        </li>
        <li class="md-nav__item"><a href="#model-parameters" class="md-nav__link">Model Parameters</a>
        </li>
        <li class="md-nav__item"><a href="#additional-reading" class="md-nav__link">Additional Reading</a>
        </li></ul>
            </nav>
        </li>
      <script type="text/javascript" src=../../../_static/js/apitoc.js></script>
  </ul>
</nav>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="image_classifier.html" class="md-nav__link">Image Classifier</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="fingerprint_authenticator.html" class="md-nav__link">Fingerprint Authenticator</a>
      
    
    </li></ul>
    
    </li>
    <li class="md-nav__item">
    
      <span class="md-nav__link caption"><span class="caption-text">Audio Related</span></span>
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../../audio/keyword_spotting_overview.html" class="md-nav__link">Keyword Spotting Overview</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../../audio/audio_feature_generator.html" class="md-nav__link">Audio Feature Generator</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../../audio/audio_utilities.html" class="md-nav__link">Audio Utilities</a>
      
    
    </li>
    <li class="md-nav__item">
    
      <span class="md-nav__link caption"><span class="caption-text">Other Information</span></span>
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../../faq/index.html" class="md-nav__link">Frequently Asked Questions</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../../other/quick_reference.html" class="md-nav__link">Quick Reference</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../../other/supported_hardware.html" class="md-nav__link">Supported Hardware</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../../guides/notebook_examples_guide.html" class="md-nav__link">Notebook Examples Guide</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../../other/settings_file.html" class="md-nav__link">Settings File</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="../../other/environment_variables.html" class="md-nav__link">Environment Variables</a>
      
    
    </li>
  </ul>
  

</nav>
              </div>
            </div>
          </div>
          <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
            <div class="md-sidebar__scrollwrap">
              <div class="md-sidebar__inner">
                
<nav class="md-nav md-nav--secondary">
    <label class="md-nav__title" for="__toc">Contents</label>
  <ul class="md-nav__list" data-md-scrollfix="" id="localtoc">
        <li class="md-nav__item"><a href="#docs-cpp-development-examples-ble-audio-classifier--page-root" class="md-nav__link">BLE Audio Classifier</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#quick-links" class="md-nav__link">Quick Links</a>
        </li>
        <li class="md-nav__item"><a href="#pac-man-demo" class="md-nav__link">Pac-Man Demo</a>
        </li>
        <li class="md-nav__item"><a href="#behavior" class="md-nav__link">Behavior</a>
        </li>
        <li class="md-nav__item"><a href="#updating-the-model" class="md-nav__link">Updating the model</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#via-simplicity-studio" class="md-nav__link">via Simplicity Studio</a>
        </li>
        <li class="md-nav__item"><a href="#via-cmake" class="md-nav__link">via CMake</a>
        </li></ul>
            </nav>
        </li>
        <li class="md-nav__item"><a href="#build-run-debug" class="md-nav__link">Build, Run, Debug</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#simplicity-studio" class="md-nav__link">Simplicity Studio</a>
        </li>
        <li class="md-nav__item"><a href="#visual-studio-code" class="md-nav__link">Visual Studio Code</a>
        </li>
        <li class="md-nav__item"><a href="#command-line" class="md-nav__link">Command-line</a>
        </li></ul>
            </nav>
        </li>
        <li class="md-nav__item"><a href="#model-parameters" class="md-nav__link">Model Parameters</a>
        </li>
        <li class="md-nav__item"><a href="#additional-reading" class="md-nav__link">Additional Reading</a>
        </li></ul>
            </nav>
        </li>
      <script type="text/javascript" src=../../../_static/js/apitoc.js></script>
  </ul>
</nav>
              </div>
            </div>
          </div>
        
        <div class="md-content">

          
          <div class="breadcrumbs md-typeset">
            <ul class="breadcrumb">
              <li></li>
              <li><a href="../../../index.html"><i class="md-icon">home</i></a></li>
                <li><a href="../index.html" >C++ Development</a></li>
                <li><a href="index.html" accesskey="U">C++ Examples</a></li>

              <li class="activate"><a>BLE Audio Classifier</a></li>
            </ul>
          </div>
          

          <article class="md-content__inner md-typeset" role="main">
            
  <section id="ble-audio-classifier">
<h1 id="docs-cpp-development-examples-ble-audio-classifier--page-root">BLE Audio Classifier<a class="headerlink" href="#docs-cpp-development-examples-ble-audio-classifier--page-root" title="Permalink to this heading">¶</a></h1>
<p>This application uses TensorFlow Lite for Microcontrollers to run audio
classification machine learning models to classify words from audio data
recorded from a microphone. The detection is visualized using the LED’s on the
board and the classification results are written to the VCOM serial port.
Additionally, the classification results are transmitted to a connected
Bluetooth Low Energy (BLE) client.</p>
<p><strong>NOTE:</strong>  Currently, this application only supports the <a class="reference external" href="https://www.silabs.com/development-tools/wireless/efr32xg24-dev-kit">BRD2601</a> embedded platform</p>
<section id="quick-links">
<h2 id="quick-links">Quick Links<a class="headerlink" href="#quick-links" title="Permalink to this heading">¶</a></h2>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/SiliconLabs/mltk/tree/master/cpp/shared/apps/ble_audio_classifier">GitHub Source</a> - View this example’s source code on Github</p></li>
<li><p><a class="reference external" href="../../../docs/cpp_development/examples/ble_audio_classifier.html">Online documentation</a> - View this example’s online documentation</p></li>
<li><p><a class="reference external" href="../../../mltk/tutorials/keyword_spotting_pacman.html">Keyword Spotting Pac-Man Tutorial</a> - View this example’s associated tutorial</p></li>
<li><p><a class="reference external" href="https://mltk-pacman.web.app">Pac-Man Live Demo</a> - Play Pac-Man using the keywords: Left, Right, Up, Down</p></li>
</ul>
</section>
<section id="pac-man-demo">
<h2 id="pac-man-demo">Pac-Man Demo<a class="headerlink" href="#pac-man-demo" title="Permalink to this heading">¶</a></h2>
<p>A webpage demo has been created to work with this example application (live demo <a class="reference external" href="https://mltk-pacman.web.app">here</a>).
The webpage connects to the development board via Bluetooth Low Energy (BLE).
Once connected, this application uses machine learning to detect the keywords:</p>
<ul class="simple">
<li><p>Left</p></li>
<li><p>Right</p></li>
<li><p>Up</p></li>
<li><p>Down</p></li>
<li><p>Stop</p></li>
<li><p>Go</p></li>
</ul>
<p>When a keyword is detected, the result is sent to the webpage via BLE which then
moves the Pac-Man on the webpage accordingly.</p>
<p>The source code for the webpage may be here at: <a class="reference external" href="https://github.com/SiliconLabs/mltk/tree/master/cpp/shared/apps/ble_audio_classifier/web/pacman"><strong>mltk repo</strong>/cpp/shared/apps/ble_audio_classifier/web/pacman</a>.</p>
</section>
<section id="behavior">
<h2 id="behavior">Behavior<a class="headerlink" href="#behavior" title="Permalink to this heading">¶</a></h2>
<p>Upon startup, the application begins advertising via Bluetooth Low Energy (BLE)
the service:</p>
<ul class="simple">
<li><p><strong>Device Name:</strong> <code class="docutils literal notranslate"><span class="pre">MLTK</span> <span class="pre">KWS</span></code></p></li>
<li><p><strong>Service UUID:</strong> <code class="docutils literal notranslate"><span class="pre">c20ffe90-4ed4-46b9-8f6c-ec143fce3e4e</span></code></p></li>
</ul>
<p>Which has one characteristic with the properties: <code class="docutils literal notranslate"><span class="pre">Read</span></code> and <code class="docutils literal notranslate"><span class="pre">Notify</span></code>.
The contents of this characteristic is a string with the format:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="n">detect</span><span class="o">-</span><span class="n">class</span><span class="o">-</span><span class="nb">id</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">confidence</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>Where:</p>
<ul class="simple">
<li><p><strong>detect class id</strong> - Is the class ID of the detected keyword</p></li>
<li><p><strong>confidence</strong> - Is the probability score of the detected keyword as a uint8 (i.e. 255 = highest confidence that the correct keyword was detected)</p></li>
</ul>
<p>The BLE client is notified whenever a keyword is detected.</p>
<p><strong>NOTE:</strong> Keyword detection is only active when a BLE client is connected.</p>
<p>Additionally, the application is using two LEDs to show detection and activity and it is
printing detection results and debug log output on the VCOM serial port. In the
application configuration file called ble_audio_classifier_config.h the user can
select which LED to use for activity and which LED to use for detection. By
default the detection LED is green/led1 and the activity LED is red/led0.</p>
<p>At a regular interval the application will perform an inference and the result
will be processed to find the average score for each class in the current
window. If the top result score is higher than a detection threshold then a
detection is triggered and the detection LED (green) will light up for about 750
ms.</p>
<p>Once the detection LED turns off the application goes back to responding to the
input data. If the change in model output is greater than a configurable
sensitivity threshold, then the activity LED (red) will blink for about 500 ms.</p>
<p>The activity LED indicates that audio has been detected on the input and the
model output is changing, but no clear classification was made.</p>
<p>In audio classification, it is common to have some results that map to silence or
unknown. These results are something that we usually want to ignore. This is
being filtered out in the audio classifier application based on the label text.
By default, any labels that start with an underscore are ignored when processing
results. This behavior can be disabled in the application configuration file.</p>
</section>
<section id="updating-the-model">
<h2 id="updating-the-model">Updating the model<a class="headerlink" href="#updating-the-model" title="Permalink to this heading">¶</a></h2>
<p>The default model used in this application is called <code class="docutils literal notranslate"><span class="pre">keyword_spotting_pacman.tflite</span></code>
and is able to classify audio into 6 different classes labeled “left”, “right”, “up”, “down”, “stop”, “go”. The source for the model can be found here:
<a class="reference external" href="https://github.com/siliconlabs/mltk/blob/master/mltk/models/siliconlabs/keyword_spotting_pacman.py">https://github.com/siliconlabs/mltk/blob/master/mltk/models/siliconlabs/keyword_spotting_pacman.py</a></p>
<p>The application is designed to work with an audio classification model created
using the Silicon Labs Machine Learning Toolkit
(<a class="reference external" href="../../../mltk/tutorials/keyword_spotting_pacman.html">MLTK</a>).
Use the MLTK to train a new audio classifier model and replace the model inside this example with the new audio
classification model.</p>
<section id="via-simplicity-studio">
<h3 id="via-simplicity-studio">via Simplicity Studio<a class="headerlink" href="#via-simplicity-studio" title="Permalink to this heading">¶</a></h3>
<p>To replace the default model, rename your <code class="docutils literal notranslate"><span class="pre">.tflite</span></code> file to
<code class="docutils literal notranslate"><span class="pre">1_&lt;your</span> <span class="pre">model</span> <span class="pre">named&gt;.tflite</span></code> and copy it into the config/tflite folder of the Simplicity Studio
project. (Simplicity Studio sorts the models alphabetically in ascending order, adding <code class="docutils literal notranslate"><span class="pre">1_</span></code>
forces the model to come first). After a new .tflite file is added to the
project Simplicity Studio will automatically use the
<a class="reference external" href="https://docs.silabs.com/gecko-platform/latest/machine-learning/tensorflow/flatbuffer-conversion">flatbuffer converter tool</a>
to convert a .tflite file into a c file which is added to the project.</p>
<p>Refer to the online <a class="reference external" href="https://docs.silabs.com/gecko-platform/latest/machine-learning/tensorflow/guide-replace-model#updating-or-replacing-the--tflite-file-in-a-project">documentation</a> for more details.</p>
</section>
<section id="via-cmake">
<h3 id="via-cmake">via CMake<a class="headerlink" href="#via-cmake" title="Permalink to this heading">¶</a></h3>
<p>The model can also be updated when building this application from <a class="reference external" href="../../../docs/cpp_development/vscode.html">Visual Studio Code</a>
or the CMake <a class="reference external" href="../../../docs/command_line/index.html">Command Line</a>.</p>
<p>To update the model, create/modify the file: <code class="docutils literal notranslate"><span class="pre">&lt;mltk</span> <span class="pre">repo</span> <span class="pre">root&gt;/user_options.cmake</span></code>
and add:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">mltk_set</span><span class="p">(</span><span class="n">GECKO_SDK_ENABLE_BLUETOOTH</span> <span class="n">ON</span><span class="p">)</span>
<span class="n">mltk_set</span><span class="p">(</span><span class="n">BLE_AUDIO_CLASSIFIER_MODEL</span> <span class="o">&lt;</span><span class="n">model</span> <span class="n">name</span> <span class="ow">or</span> <span class="n">path</span><span class="o">&gt;</span><span class="p">)</span>
</pre></div>
</div>
<p>where <code class="docutils literal notranslate"><span class="pre">&lt;model</span> <span class="pre">name</span> <span class="pre">or</span> <span class="pre">path&gt;</span></code> is the file path to your model’s <code class="docutils literal notranslate"><span class="pre">.tflite</span></code>
or the MLTK model name.</p>
<p>With this variable set, when the ble_audio_classifier application is built the
specified model will be built into the application.</p>
</section>
</section>
<section id="build-run-debug">
<h2 id="build-run-debug">Build, Run, Debug<a class="headerlink" href="#build-run-debug" title="Permalink to this heading">¶</a></h2>
<p>See the <a class="reference external" href="../../../docs/cpp_development/index.html">online documentation</a> for how to build and run this application:</p>
<section id="simplicity-studio">
<h3 id="simplicity-studio">Simplicity Studio<a class="headerlink" href="#simplicity-studio" title="Permalink to this heading">¶</a></h3>
<p>If using <a class="reference external" href="../../../docs/cpp_development/simplicity_studio.html">Simplicity Studio</a> select the <code class="docutils literal notranslate"><span class="pre">MLTK</span> <span class="pre">-</span> <span class="pre">BLE</span> <span class="pre">Audio</span> <span class="pre">Classifier</span></code> Project.</p>
</section>
<section id="visual-studio-code">
<h3 id="visual-studio-code">Visual Studio Code<a class="headerlink" href="#visual-studio-code" title="Permalink to this heading">¶</a></h3>
<p>If using <a class="reference external" href="../../../docs/cpp_development/vscode.html">Visual Studio Code</a> select the <code class="docutils literal notranslate"><span class="pre">mltk_ble_audio_classifier</span></code> CMake target.</p>
<p>To build this app, create/modify the file: <code class="docutils literal notranslate"><span class="pre">&lt;mltk</span> <span class="pre">repo</span> <span class="pre">root&gt;/user_options.cmake</span></code>
and add:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">mltk_set</span><span class="p">(</span><span class="n">GECKO_SDK_ENABLE_BLUETOOTH</span> <span class="n">ON</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="command-line">
<h3 id="command-line">Command-line<a class="headerlink" href="#command-line" title="Permalink to this heading">¶</a></h3>
<p>If using the <a class="reference external" href="../../../docs/cpp_development/command_line.html">Command Line</a> select the <code class="docutils literal notranslate"><span class="pre">mltk_ble_audio_classifier</span></code> CMake target.</p>
<p>To build this app, create/modify the file: <code class="docutils literal notranslate"><span class="pre">&lt;mltk</span> <span class="pre">repo</span> <span class="pre">root&gt;/user_options.cmake</span></code>
and add:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">mltk_set</span><span class="p">(</span><span class="n">GECKO_SDK_ENABLE_BLUETOOTH</span> <span class="n">ON</span><span class="p">)</span>
</pre></div>
</div>
</section>
</section>
<section id="model-parameters">
<h2 id="model-parameters">Model Parameters<a class="headerlink" href="#model-parameters" title="Permalink to this heading">¶</a></h2>
<p>In order for the audio classification to work correctly, we need to use the same
audio feature generator configuration parameters for inference as is used when
training the model. When using the MLTK to train an audio classification model
the model <a class="reference external" href="../../../docs/guides/model_parameters.html#audiodatasetmixin">parameters</a>
will be embedded in the metadata section of the <code class="docutils literal notranslate"><span class="pre">.tflite</span></code>
file. The model parameters are extracted from the <code class="docutils literal notranslate"><span class="pre">.tflite</span></code> at runtime.</p>
</section>
<section id="additional-reading">
<h2 id="additional-reading">Additional Reading<a class="headerlink" href="#additional-reading" title="Permalink to this heading">¶</a></h2>
<ul class="simple">
<li><p><a class="reference external" href="https://siliconlabs.github.io/mltk">MLTK Documentation</a></p></li>
<li><p><a class="reference external" href="https://www.silabs.com/documents/public/quick-start-guides/qsg169-bluetooth-sdk-v3x-quick-start-guide.pdf">QSG169: Bluetooth SDK v3.x Quick Start Guide</a></p></li>
<li><p><a class="reference external" href="https://docs.silabs.com/bluetooth/latest/">Bluetooth Documentation</a></p></li>
<li><p><a class="reference external" href="https://www.silabs.com/documents/public/user-guides/ug103-14-fundamentals-ble.pdf">UG103.14: Bluetooth LE Fundamentals</a></p></li>
<li><p><a class="reference external" href="https://www.silabs.com/documents/public/user-guides/ug434-bluetooth-c-soc-dev-guide-sdk-v3x.pdf">UG434: Silicon Labs Bluetooth ® C Application Developer’s Guide for SDK v3.x</a></p></li>
<li><p><a class="reference external" href="https://www.silabs.com/support/training/bluetooth">Bluetooth Training</a></p></li>
<li><p><a class="reference external" href="../../../docs/audio/audio_feature_generator.html">Audio Feature Generator</a></p></li>
<li><p><a class="reference external" href="../../../docs/audio/audio_utilities.html">Audio Utilities</a></p></li>
<li><p><a class="reference external" href="https://docs.silabs.com/gecko-platform/latest/machine-learning/tensorflow/getting-started">Gecko SDK Machine Learning Documentation</a></p></li>
<li><p><a class="reference external" href="https://www.tensorflow.org/lite/microcontrollers">TensorFlow Lite Micro</a></p></li>
</ul>
</section>
</section>


          </article>
        </div>
      </div>
      <a href="#" class="go-top"><i class="md-icon">arrow_upward</i>Back to Top</a>
    </main>
  </div>
  <footer class="md-footer">
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
          
            <a href="audio_classifier.html" title="Audio Classifier"
               class="md-flex md-footer-nav__link md-footer-nav__link--prev"
               rel="prev">
              <div class="md-flex__cell md-flex__cell--shrink">
                <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
              </div>
              <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
                <span class="md-flex__ellipsis">
                  <span
                      class="md-footer-nav__direction"> Previous </span> Audio Classifier </span>
              </div>
            </a>
          
          
            <a href="image_classifier.html" title="Image Classifier"
               class="md-flex md-footer-nav__link md-footer-nav__link--next"
               rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title"><span
                class="md-flex__ellipsis"> <span
                class="md-footer-nav__direction"> Next </span> Image Classifier </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink"><i
                class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          
        </a>
        
      </nav>
    </div>
    <div class="md-footer-meta md-typeset">
      <div class="md-footer-meta__inner md-grid">
        <div class="md-footer-copyright">
          <div class="md-footer-copyright__highlight">
              &#169; Copyright 2023, Silicon Labs.
              
          </div>
            Last updated on
              Aug 04, 2023.
            <br/>
            Created using
            <a href="http://www.sphinx-doc.org/">Sphinx</a> 5.3.0.
             and
            <a href="https://github.com/bashtage/sphinx-material/">Material for
              Sphinx</a>
        </div>
        <button id="survey-link" class="feedback-button">Feedback</button>
      </div>
    </div>
  </footer>
  <div class="privacy-banner">
    <div class="privacy-banner-wrapper">
      <p>
        <b>Important:</b> We use cookies only for functional and traffic analytics. <br />
        We DO NOT use cookies for any marketing purposes. By using our site you acknowledge you have read and understood our <a class="privacy-policy" href="https://www.silabs.com/about-us/legal/cookie-policy" target="_blank">Cookie Policy</a>.
      </p>
      <a class="privacy-banner-accept" href="#">Got it</a>
    </div>
</div>
  
<div class="survey-container" id="dlg-survey"> 
    <div class="close" id="dlg-survey-close"><i class="md-icon">close</i></div>
    <div class="msg">Please click the <b>submit</b> button at the end even if you do not answer all of the questions</div>
    <iframe id="iframe-survey" style="width: 100%; height: 100%;"></iframe>
</div>
  
  <script src="../../../_static/javascripts/application.js"></script>
  <script>app.initialize({version: "1.0.4", url: {base: ".."}})</script>
  </body>
</html>